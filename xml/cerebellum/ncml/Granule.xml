<?xml version="1.0" encoding="UTF-8"?>
<ncml:model xmlns:ncml="ncml" name="CGC">
    <!--<include href="SimpleIonChannel.xml"/> -->
    <cell id="Granule">
        <notes>A model of a granule cell</notes>
        <morphology id="GranuleMorph">
            <!-- Segments -->
            <segment id="soma">
                <proximal x="0" y="0" z="0" diameter="9.76" />
                <distal x="9.76" y="0" z="0" diameter="9.76" />
            </segment>
            <segmentGroup id="soma_group">
                <member segment="soma" />
            </segmentGroup>
        </morphology>
        <biophysicalProperties id="Cerebellar Granule Cell">
            <actionPotentialThreshold v="-21"/>
            <membraneProperties>
                <ncml:input name="v" />
                <ncml:input name="cai" from="ion-pools" />
                <ncml:input name="ica" from="ion-currents" />
                <ncml:const name="fix_celsius" value="30" />
                <ncml:defun id="sigm">
                    <ncml:arg>x</ncml:arg>
                    <ncml:arg>y</ncml:arg>
                    <ncml:body> (1 / (exp (x / y) + 1))
                    </ncml:body>
                </ncml:defun>
                <ncml:defun id="linoid">
                    <ncml:arg>x</ncml:arg>
                    <ncml:arg>y</ncml:arg>
                    <ncml:body> (if ((abs (x / y)) &lt; 1e-6) then (y * (1 - ((x / y) / 2))) else (x
                        / (exp (x / y) - 1)) ) 
                    </ncml:body>
                </ncml:defun>
                <ncml:component type="decaying-pool" name="ca">
                    <ncml:const name="F" value="96485.0" />
                    <ncml:const name="d" value=".2" />
                    <ncml:const name="cao" value="2." />
                    <ncml:const name="cai0" value="1e-4" />
                    <ncml:const name="beta" value="1.5" />
                    <ncml:rate id="ca">
                        <ncml:expr> ((neg (ica) / (2 * F * d)) - (beta * (cai - cai0)))
                        </ncml:expr>
                        <ncml:initial>cai0</ncml:initial>
                    </ncml:rate>
                    <ncml:output name="ca" />
                </ncml:component>
                <ncml:component type="ionic-current" name="CaHVA">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 20) / 10)))
                        </ncml:const>
                        <!-- constant functions -->
                        <ncml:const name="Aalpha_s" value="0.04944" />
                        <ncml:const name="Kalpha_s" value="15.87301587302" />
                        <ncml:const name="V0alpha_s" value="-29.06" />
                        <ncml:const name="Abeta_s" value="0.08298" />
                        <ncml:const name="Kbeta_s" value="-25.641" />
                        <ncml:const name="V0beta_s" value="-18.66" />
                        <ncml:const name="Aalpha_u" value="0.0013" />
                        <ncml:const name="Kalpha_u" value="-18.183" />
                        <ncml:const name="V0alpha_u" value="-48" />
                        <ncml:const name="Abeta_u" value="0.0013" />
                        <ncml:const name="Kbeta_u" value="83.33" />
                        <ncml:const name="V0beta_u" value="-48" />
                        <!-- rate functions -->
                        <ncml:defun name="alpha_s">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body> (Q10 * Aalpha_s * exp((v - V0alpha_s) / Kalpha_s))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_s">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body> (Q10 * Abeta_s * exp((v - V0beta_s) / Kbeta_s))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="alpha_u">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body> (Q10 * Aalpha_u * exp((v - V0alpha_u) / Kalpha_u))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_u">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body> (Q10 * Abeta_u * exp((v - V0beta_u) / Kbeta_u))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="CaHVA">
                            <!-- ion name: exported variables will be of the form {ion}_{id} -->
                            <ncml:initial_m> ((alpha_s (v))/(alpha_s (v) + beta_s (v)) )
                            </ncml:initial_m>
                            <ncml:initial_h> ((alpha_u (v))/(alpha_u (v) + beta_u (v)) )
                            </ncml:initial_h>
                            <ncml:m_power> 2</ncml:m_power>
                            <ncml:h_power> 1</ncml:h_power>
                            <ncml:m_alpha> alpha_s (v)</ncml:m_alpha>
                            <ncml:m_beta> beta_s (v)</ncml:m_beta>
                            <ncml:h_alpha> alpha_u (v)</ncml:h_alpha>
                            <ncml:h_beta> beta_u (v)</ncml:h_beta>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="1e3 * 0.00056" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="ca">
                        <ncml:const name="e_Kv4" value="129.33" />
                        <ncml:output name="e_Kv4" />
                    </ncml:component>
                </ncml:component>
                <!-- end CaHVA current -->
                <ncml:component type="ionic-current" name="KA">
                    <ncml:component type="gate">
                        <!-- rate constants -->
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 20) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_a" value="4.88826" />
                        <ncml:const name="Kalpha_a" value="-23.32708" />
                        <ncml:const name="V0alpha_a" value="-9.17203" />
                        <ncml:const name="Abeta_a" value="0.99285" />
                        <ncml:const name="Kbeta_a" value="19.47175" />
                        <ncml:const name="V0beta_a" value="-18.27914" />
                        <ncml:const name="Aalpha_b" value="0.11042" />
                        <ncml:const name="Kalpha_b" value="12.8433" />
                        <ncml:const name="V0alpha_b" value="-111.33209" />
                        <ncml:const name="Abeta_b" value="0.10353" />
                        <ncml:const name="Kbeta_b" value="-8.90123" />
                        <ncml:const name="V0beta_b" value="-49.9537" />
                        <ncml:const name="V0_ainf" value="-46.7" />
                        <ncml:const name="K_ainf" value="-19.8" />
                        <ncml:const name="V0_binf" value="-78.8" />
                        <ncml:const name="K_binf" value="8.4" />
                        <!-- rate functions -->
                        <ncml:defun name="alpha_a">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_a * sigm ((v - V0alpha_a) Kalpha_a))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_a">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * (Abeta_a / exp ((v - V0beta_a) / Kbeta_a)))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="alpha_b">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_b * sigm ((v - V0alpha_b) Kalpha_b))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_b">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_b * sigm ((v - V0beta_b) Kbeta_b))</ncml:body>
                        </ncml:defun>
                        <ncml:asgn name="a_inf">
                            <ncml:expr>(1 / (1 + exp ((v - V0_ainf) / K_ainf)))</ncml:expr>
                        </ncml:asgn>
                        <ncml:asgn name="tau_a">
                            <ncml:expr>(1 / (alpha_a (v) + beta_a (v)))</ncml:expr>
                        </ncml:asgn>
                        <ncml:asgn name="b_inf">
                            <ncml:expr>(1 / (1 + exp ((v - V0_binf) / K_binf)))</ncml:expr>
                        </ncml:asgn>
                        <ncml:asgn name="tau_b">
                            <ncml:expr>(1 / (alpha_b (v) + beta_b (v)))</ncml:expr>
                        </ncml:asgn>
                        <ncml:hh_ionic_gate name="KA">
                            <ncml:initial_m>((alpha_a (v)) / (alpha_a (v) + beta_a (v)))
                            </ncml:initial_m>
                            <ncml:initial_h>((alpha_b (v)) / (alpha_b (v) + beta_b (v)))
                            </ncml:initial_h>
                            <ncml:m_power>3</ncml:m_power>
                            <ncml:h_power>1</ncml:h_power>
                            <ncml:m_inf>a_inf</ncml:m_inf>
                            <ncml:m_tau>tau_a</ncml:m_tau>
                            <ncml:h_inf>b_inf</ncml:h_inf>
                            <ncml:h_tau>tau_b</ncml:h_tau>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.004" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="k">
                        <ncml:const name="e" value="-84.69" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="ionic-current" name="KCa">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 30) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_c" value="2.5" />
                        <ncml:const name="Balpha_c" value="0.0015" />
                        <ncml:const name="Kalpha_c" value="-11.765" />
                        <ncml:const name="Abeta_c" value="1.5" />
                        <ncml:const name="Bbeta_c" value="0.00015" />
                        <ncml:const name="Kbeta_c" value="-11.765" />
                        <ncml:defun name="alpha_c">
                            <ncml:arg>v</ncml:arg>
                            <ncml:arg>cai</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_c / (1 + (Balpha_c * exp (v / Kalpha_c) /
                                cai)))</ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_c">
                            <ncml:arg>v</ncml:arg>
                            <ncml:arg>cai</ncml:arg>
                            <ncml:body>(Q10 * Abeta_c / (1 + (cai / (Bbeta_c * exp (v / Kbeta_c)))))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="KCa">
                            <ncml:initial_m>((alpha_c (v cai)) / (alpha_c (v cai) + beta_c (v cai)))
                            </ncml:initial_m>
                            <ncml:m_power>1</ncml:m_power>
                            <ncml:h_power>0</ncml:h_power>
                            <ncml:m_inf>(alpha_c (v cai))</ncml:m_inf>
                            <ncml:m_tau>(beta_c (v cai))</ncml:m_tau>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.004" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="k">
                        <ncml:const name="e" value="-84.69" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="ionic-current" name="Kir">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 20) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_d" value="0.13289" />
                        <ncml:const name="Kalpha_d" value="-24.3902" />
                        <ncml:const name="V0alpha_d" value="-83.94" />
                        <ncml:const name="Abeta_d" value="0.16994" />
                        <ncml:const name="Kbeta_d" value="35.714" />
                        <ncml:const name="V0beta_d" value="-83.94" />
                        <ncml:defun name="alpha_d">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_d * exp ((v - V0alpha_d) / Kalpha_d))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_d">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_d * exp ((v - V0beta_d) / Kbeta_d))</ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="Kir">
                            <ncml:initial_m>((alpha_d (v)) / (alpha_d (v) + beta_d (v)))
                            </ncml:initial_m>
                            <ncml:m_power>1</ncml:m_power>
                            <ncml:h_power>0</ncml:h_power>
                            <ncml:m_alpha>(alpha_d (v))</ncml:m_alpha>
                            <ncml:m_beta>(beta_d (v))</ncml:m_beta>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.0009" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="k">
                        <ncml:const name="e" value="-84.69" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="voltage-clamp" name="Kir">
                    <ncml:const name="vchold" value="-71" />
                    <ncml:const name="vcbase" value="-69" />
                    <ncml:const name="vcinc" value="10" />
                    <ncml:const name="vcsteps" value="8" />
                    <ncml:const name="vchdur" value="30" />
                    <ncml:const name="vcbdur" value="100" />
                    <ncml:output name="vchold" />
                    <ncml:output name="vcbase" />
                    <ncml:output name="vcinc" />
                    <ncml:output name="vcsteps" />
                    <ncml:output name="vchdur" />
                    <ncml:output name="vcbdur" />
                </ncml:component>
                <ncml:component type="ionic-current" name="KM">
                    <ncml:component type="gate">
                        <ncml:const name="Aalpha_n" value="0.0033" />
                        <ncml:const name="Kalpha_n" value="40" />
                        <ncml:const name="V0alpha_n" value="-30" />
                        <ncml:const name="Abeta_n" value="0.0033" />
                        <ncml:const name="Kbeta_n" value="-20" />
                        <ncml:const name="V0beta_n" value="-30" />
                        <ncml:const name="V0_ninf" value="-30" />
                        <ncml:const name="B_ninf" value="6" />
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 22) / 10)))
                        </ncml:const>
                        <ncml:defun name="alpha_n">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_n * exp ((v - V0alpha_n) / Kalpha_n))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_n">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_n * exp ((v - V0beta_n) / Kbeta_n))</ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="KM">
                            <ncml:initial_m>((alpha_n (v)) / (alpha_n (v) + beta_n (v)))
                            </ncml:initial_m>
                            <ncml:m_power>1</ncml:m_power>
                            <ncml:h_power>0</ncml:h_power>
                            <ncml:m_inf>(1 / (1 + exp ((neg (v - V0_ninf)) / B_ninf)))</ncml:m_inf>
                            <ncml:m_tau>(1 / (alpha_n (v) + beta_n (v)))</ncml:m_tau>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.00035" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="k">
                        <ncml:const name="e" value="-84.69" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="voltage-clamp" name="KM">
                    <ncml:const name="vchold" value="-71" />
                    <ncml:const name="vcbase" value="-69" />
                    <ncml:const name="vcinc" value="10" />
                    <ncml:const name="vcsteps" value="8" />
                    <ncml:const name="vchdur" value="30" />
                    <ncml:const name="vcbdur" value="100" />
                    <ncml:output name="vchold" />
                    <ncml:output name="vcbase" />
                    <ncml:output name="vcinc" />
                    <ncml:output name="vcsteps" />
                    <ncml:output name="vchdur" />
                    <ncml:output name="vcbdur" />
                </ncml:component>
                <ncml:component type="ionic-current" name="KV">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 6.3) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_n" value="-0.01" />
                        <ncml:const name="Kalpha_n" value="-10" />
                        <ncml:const name="V0alpha_n" value="-25" />
                        <ncml:const name="Abeta_n" value="0.125" />
                        <ncml:const name="Kbeta_n" value="-80" />
                        <ncml:const name="V0beta_n" value="-35" />
                        <ncml:defun name="alpha_n">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_n * linoid ((v - V0alpha_n) Kalpha_n))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_n">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_n * exp ((v - V0beta_n) / Kbeta_n))</ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="KV">
                            <ncml:initial_m>((alpha_n (v)) / (alpha_n (v) + beta_n (v)))
                            </ncml:initial_m>
                            <ncml:m_power>4</ncml:m_power>
                            <ncml:h_power>0</ncml:h_power>
                            <ncml:m_alpha>(alpha_n (v))</ncml:m_alpha>
                            <ncml:m_beta>(beta_n (v))</ncml:m_beta>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.003" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="k">
                        <ncml:const name="e" value="-84.69" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="voltage-clamp" name="KV">
                    <ncml:const name="vchold" value="-71" />
                    <ncml:const name="vcbase" value="-69" />
                    <ncml:const name="vcinc" value="10" />
                    <ncml:const name="vcsteps" value="8" />
                    <ncml:const name="vchdur" value="30" />
                    <ncml:const name="vcbdur" value="100" />
                    <ncml:output name="vchold" />
                    <ncml:output name="vcbase" />
                    <ncml:output name="vcinc" />
                    <ncml:output name="vcsteps" />
                    <ncml:output name="vchdur" />
                    <ncml:output name="vcbdur" />
                </ncml:component>
                <ncml:component type="ionic-current" name="Lkg1">
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="5.68e-05" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="non-specific">
                        <ncml:const name="e" value="-58" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="ionic-current" name="Lkg2">
                    <ncml:component type="pore">
                        <ncml:const name="ggaba"> (2.17e-05)
                        </ncml:const>
                        <ncml:output name="ggaba" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="non-specific">
                        <ncml:const name="egaba" value="-65" />
                        <ncml:output name="egaba" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="ionic-current" name="Na">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 20) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_m" value="-0.3" />
                        <ncml:const name="Kalpha_m" value="-10" />
                        <ncml:const name="V0alpha_m" value="-19" />
                        <ncml:const name="Abeta_m" value="12" />
                        <ncml:const name="Kbeta_m" value="-18.182" />
                        <ncml:const name="V0beta_m" value="-44" />
                        <ncml:const name="Aalpha_h" value="0.105" />
                        <ncml:const name="Kalpha_h" value="-3.333" />
                        <ncml:const name="V0alpha_h" value="-44" />
                        <ncml:const name="Abeta_h" value="1.5" />
                        <ncml:const name="Kbeta_h" value="-5" />
                        <ncml:const name="V0beta_h" value="-11" />
                        <ncml:defun name="alpha_m">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_m * linoid ((v - V0alpha_m) Kalpha_m))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_m">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_m * exp ((v - V0beta_m) / Kbeta_m))</ncml:body>
                        </ncml:defun>
                        <ncml:defun name="alpha_h">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_h * exp ((v - V0alpha_h) / Kalpha_h))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_h">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_h / (1 + exp ((v - V0beta_h) / Kbeta_h)))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="Na">
                            <ncml:initial_m>((alpha_m (v)) / (alpha_m (v) + beta_m (v)))
                            </ncml:initial_m>
                            <ncml:initial_h>((alpha_h (v)) / (alpha_h (v) + beta_h (v)))
                            </ncml:initial_h>
                            <ncml:m_power>3</ncml:m_power>
                            <ncml:h_power>1</ncml:h_power>
                            <ncml:m_alpha>(alpha_m (v))</ncml:m_alpha>
                            <ncml:m_beta>(beta_m (v))</ncml:m_beta>
                            <ncml:h_alpha>(alpha_h (v))</ncml:h_alpha>
                            <ncml:h_beta>(beta_h (v))</ncml:h_beta>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.013" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="na">
                        <ncml:const name="e" value="87.39" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="voltage-clamp" name="Na">
                    <ncml:const name="vchold" value="-71" />
                    <ncml:const name="vcbase" value="-60" />
                    <ncml:const name="vcinc" value="10" />
                    <ncml:const name="vcsteps" value="9" />
                    <ncml:const name="vchdur" value="30" />
                    <ncml:const name="vcbdur" value="100" />
                    <ncml:output name="vchold" />
                    <ncml:output name="vcbase" />
                    <ncml:output name="vcinc" />
                    <ncml:output name="vcsteps" />
                    <ncml:output name="vchdur" />
                    <ncml:output name="vcbdur" />
                </ncml:component>
                <ncml:component type="ionic-current" name="Nar">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 20) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_s" value="-0.00493" />
                        <ncml:const name="V0alpha_s" value="-4.48754" />
                        <ncml:const name="Kalpha_s" value="-6.81881" />
                        <ncml:const name="Shiftalpha_s" value="8e-05" />
                        <ncml:const name="Abeta_s" value="0.01558" />
                        <ncml:const name="V0beta_s" value="43.97494" />
                        <ncml:const name="Kbeta_s" value="0.10818" />
                        <ncml:const name="Shiftbeta_s" value="0.04752" />
                        <ncml:const name="Aalpha_f" value="0.31836" />
                        <ncml:const name="V0alpha_f" value="-80" />
                        <ncml:const name="Kalpha_f" value="-62.52621" />
                        <ncml:const name="Abeta_f" value="0.01014" />
                        <ncml:const name="V0beta_f" value="-83.3332" />
                        <ncml:const name="Kbeta_f" value="16.05379" />
                        <ncml:defun name="alpha_s">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * (Shiftalpha_s + (Aalpha_s * ((v + V0alpha_s)))) / (exp
                                ((v + V0alpha_s) / Kalpha_s) - 1))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_s">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * (Shiftbeta_s + Abeta_s * ((v + V0beta_s) / (exp ((v +
                                V0beta_s) / Kbeta_s) - 1))))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="alpha_f">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_f * exp ((v - V0alpha_f) / Kalpha_f))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_f">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_f * exp ((v - V0beta_f) / Kbeta_f))</ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="Nar">
                            <ncml:initial_m>((alpha_s (v)) / (alpha_s (v) + beta_s (v)))
                            </ncml:initial_m>
                            <ncml:initial_h>((alpha_f (v)) / (alpha_f (v) + beta_f (v)))
                            </ncml:initial_h>
                            <ncml:m_power>1</ncml:m_power>
                            <ncml:h_power>1</ncml:h_power>
                            <ncml:m_alpha>(alpha_s (v))</ncml:m_alpha>
                            <ncml:m_beta>(beta_s (v))</ncml:m_beta>
                            <ncml:h_alpha>(alpha_f (v))</ncml:h_alpha>
                            <ncml:h_beta>(beta_f (v))</ncml:h_beta>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="0.0005" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="na">
                        <ncml:const name="e" value="87.39" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="voltage-clamp" name="Nar">
                    <ncml:const name="vchold" value="-71" />
                    <ncml:const name="vcbase" value="-60" />
                    <ncml:const name="vcinc" value="10" />
                    <ncml:const name="vcsteps" value="9" />
                    <ncml:const name="vchdur" value="30" />
                    <ncml:const name="vcbdur" value="100" />
                    <ncml:output name="vchold" />
                    <ncml:output name="vcbase" />
                    <ncml:output name="vcinc" />
                    <ncml:output name="vcsteps" />
                    <ncml:output name="vchdur" />
                    <ncml:output name="vcbdur" />
                </ncml:component>
                <ncml:component type="ionic-current" name="pNa">
                    <ncml:component type="gate">
                        <ncml:const name="Q10"> (pow (3 ((fix_celsius - 30) / 10)))
                        </ncml:const>
                        <ncml:const name="Aalpha_m" value="-0.091" />
                        <ncml:const name="Kalpha_m" value="-5" />
                        <ncml:const name="V0alpha_m" value="-42" />
                        <ncml:const name="Abeta_m" value="0.062" />
                        <ncml:const name="Kbeta_m" value="5" />
                        <ncml:const name="V0beta_m" value="-42" />
                        <ncml:const name="V0_minf" value="-42" />
                        <ncml:const name="B_minf" value="5" />
                        <ncml:defun name="alpha_m">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Aalpha_m * linoid ((v - V0alpha_m) Kalpha_m))
                            </ncml:body>
                        </ncml:defun>
                        <ncml:defun name="beta_m">
                            <ncml:arg>v</ncml:arg>
                            <ncml:body>(Q10 * Abeta_m * linoid ((v - V0beta_m) Kbeta_m))</ncml:body>
                        </ncml:defun>
                        <ncml:hh_ionic_gate name="pNa">
                            <ncml:initial_m>((alpha_m (v)) / (alpha_m (v) + beta_m (v)))
                            </ncml:initial_m>
                            <ncml:m_power>1</ncml:m_power>
                            <ncml:h_power>0</ncml:h_power>
                            <ncml:m_inf>(1 / (1 + exp ((neg (v - V0_minf)) / B_minf)))</ncml:m_inf>
                            <ncml:m_tau>(5 / (alpha_m (v) + beta_m (v)))</ncml:m_tau>
                        </ncml:hh_ionic_gate>
                    </ncml:component>
                    <ncml:component type="pore">
                        <ncml:const name="gbar" value="2e-05" />
                        <ncml:output name="gbar" />
                    </ncml:component>
                    <ncml:component type="permeating-ion" name="na">
                        <ncml:const name="e" value="87.39" />
                        <ncml:output name="e" />
                    </ncml:component>
                </ncml:component>
                <ncml:component type="voltage-clamp" name="pNa">
                    <ncml:const name="vchold" value="-71" />
                    <ncml:const name="vcbase" value="-60" />
                    <ncml:const name="vcinc" value="10" />
                    <ncml:const name="vcsteps" value="9" />
                    <ncml:const name="vchdur" value="30" />
                    <ncml:const name="vcbdur" value="100" />
                    <ncml:output name="vchold" />
                    <ncml:output name="vcbase" />
                    <ncml:output name="vcinc" />
                    <ncml:output name="vcsteps" />
                    <ncml:output name="vchdur" />
                    <ncml:output name="vcbdur" />
                </ncml:component>
                <!-- Tom's additions below here -->
                <ionicCurrent id="CGC_Lkg1" />
                <ionicCurrent id="CGC_Na" />
                <ionicCurrent id="CGC_Nar" />
                <ionicCurrent id="CGC_KV" />
                <ionicCurrent id="CGC_KA" />
                <ionicCurrent id="CGC_Kir" />
                <ionicCurrent id="CGC_KCa" />
                <ionicCurrent id="CGC_CaHVA" />
                <ionicCurrent id="CGC_Ca" />
                <ionicCurrent id="CGC_pNa" />
                <ionicCurrent id="CGC_KM" />
                <ionicCurrent id="CGC_Lkg2" />
                <passiveCurrent condDensity="3.0" units="S_per_m2" />
                <specificCapacitance value="1.0" units="uF_per_cm2" />
                <reversalPotential species="na" value="87.39" units="mV" />
                <reversalPotential species="k" value="-84.69" units="mV" />
                <reversalPotential species="ca" value="129.33" units="mV" />
                <!-- Not inserted need to check <reversalPotential species="cl" value="-65 mV"/> -->
                <conductanceSynapse id="AMPA" type="Exp2Syn" segmentGroup="soma_group">
                    <ncml:arg name="tau1" value="0.3" units="ms" />
                    <ncml:arg name="tau2" value="0.5" units="ms" />
                    <ncml:arg name="e" value="0.0" units="mV" />
                </conductanceSynapse>
                <conductanceSynapse id="NMDA" type="Exp2Syn" segmentGroup="soma_group">
                    <ncml:arg name="tau1" value="1" units="ms" />
                    <ncml:arg name="tau2" value="13.3" units="ms" />
                    <ncml:arg name="e" value="0.0" units="mV" />
                </conductanceSynapse>
                <conductanceSynapse id="GABA" type="Exp2Syn" segmentGroup="soma_group">
                    <ncml:arg name="tau1_0" value="0.31" units="ms" />
                    <ncml:arg name="tau2_0" value="8.8" units="ms" />
                    <ncml:arg name="e_0" value="-75.0" units="mV" />
                    <!-- <ncml:arg name="tau1_1" value="0.31" units="ms" /> <ncml:arg name="tau2_1" value="300" 
                        units="ms" /> <ncml:arg name="e_1" value="-75.0" units="mV" /> -->
                </conductanceSynapse>
                <gapJunction id="Gap" type="Gap" segmentGroup="soma_group" />
            </membraneProperties>
            <intracellularProperties>
                <resistivity value="100" units="ohm_cm" />  <!-- Used for specific axial resistance -->
            </intracellularProperties>
        </biophysicalProperties>
    </cell>
</ncml:model>
