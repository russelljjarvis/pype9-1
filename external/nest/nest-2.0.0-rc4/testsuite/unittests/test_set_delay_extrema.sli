/*
 *  test_iaf_1to2.sli
 *
 *  This file is part of NEST
 *
 *  Copyright (C) 2004 by
 *  The NEST Initiative
 *
 *  See the file AUTHORS for details.
 *
 *  Permission is granted to compile and modify
 *  this file for non-commercial use.
 *  See the file LICENSE for details.
 *
 */


/* BeginDocumentation
   Name: testsuite::test_set_delay_extrema - sli script to test if min_ and max_delay
   can be set by the user correctly

   Synopsis: (test_set_delay_extrema) run -> compare output with comments in file

   FirstVersion: July 2004
   Author: Diesmann
   SeeAlso: testsuite::test_iaf_1to2, testsuite::test_iaf_psp, testsuite::test_iaf_dc_aligned_delay
*/

/unittest (6335) require
/unittest using



/smalldelay 0.5 def    % small connection delay used in network
/bigdelay   1.0 def    % big connection delay used in netwokr
/simtime    1.0 def    % simulation time


/AlignedImpact
{
  /h Set              % argument: computation step size in ms  

  ResetKernel

  0 << /resolution h >> SetStatus

  /static_synapse
  <<                                % settings not required but respected:
      /min_delay h                  % smallest delay expected by user 
      /max_delay bigdelay 2 mul	    % biggest delay expected by user
  >> SetDefaults

  /iaf_neuron Create /neuron1 Set
  neuron1 << /I_e 1450.0 >> SetStatus

  /iaf_neuron Create /neuron2 Set


  neuron1 neuron2 100.0 smalldelay Connect
  neuron2 neuron1 100.0 bigdelay Connect


  simtime Simulate

} def 

0.1 AlignedImpact


{0 [[/max_delay /min_delay]] get [bigdelay 2 mul h] eq } assert_or_die


